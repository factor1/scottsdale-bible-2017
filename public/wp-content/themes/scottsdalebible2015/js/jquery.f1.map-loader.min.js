window.f1=window.f1||{},f1.MapLoader=f1.MapLoader||{},function($,window,document,undefined){var name="mapLoader",defaults={api_key:"",center:{lat:38.28333333,lng:-77.48333333},zoomControl:!0,zoom:8,minZoom:null,maxZoom:null,width:"auto",height:"auto",iconWidth:null,iconHeight:null,scrollwheel:!1,markers:"autoload",mapTypes:[],hideDefaultMapType:!1},endpoint="//maps.googleapis.com/maps/api/js?key=",mapLoader=function(container,options){var loader=this;loader.options=$.extend({},defaults,options),loader.container$=$(container).uniqueId(),loader.callback="f1.MapLoader.init_"+loader.container$.attr("id").replace(/-/g,"_"),loader.endpoint=endpoint+loader.options.api_key,loader.map=null,loader.markers=[],loader.mapTypes=[],loader.init=function(){if((api_key=loader.container$.data("key"))&&(loader.endpoint+=api_key,loader.options.api_key=api_key),!loader.options.api_key)throw new loader.exception("No API key set.");return(zoom=loader.container$.data("zoom"))&&(loader.options.zoom=zoom),(lat=loader.container$.data("lat"))&&(loader.options.center.lat=lat),(lng=loader.container$.data("lng"))&&(loader.options.center.lng=lng),"undefined"==typeof google||"undefined"==typeof google.maps?(eval(loader.callback+" = function() { loader.prepare(); };"),script$=$(document.createElement("script")),void script$.prop("type","text/javascript").prop("src",loader.endpoint+"&sensor=false&callback="+loader.callback).appendTo($("body"))):void loader.prepare()},loader.prepare=function(){loader.canvas$=$(document.createElement("div")),loader.canvas$.css("width","100%").css("min-width","50px").css("height","100%").css("min-height","50px"),loader.container$.css("width",loader.options.width).css("height",loader.options.height).empty().append(loader.canvas$),loader.generateMapTypes(),loader.map=loader.generateMap(),"autoload"===loader.options.markers&&loader.autoloadMarkers();for(n in loader.options.markers)loader.addMarker(loader.options.markers[n])},loader.generateMapTypes=function(){if(loader.options.mapTypes)for(n in loader.options.mapTypes)loader.mapTypes[loader.options.mapTypes[n].name]=new google.maps.StyledMapType(loader.options.mapTypes[n].styles,{name:loader.options.mapTypes[n].name})},loader.generateMap=function(){var o=loader.options.hideDefaultMapType?[]:[google.maps.MapTypeId.ROADMAP];for(n in loader.mapTypes)o.push(n);var e=new google.maps.Map(loader.canvas$.get(0),{center:loader.options.center,zoomControl:loader.options.zoomControl,zoom:loader.options.zoom,minZoom:loader.options.minZoom,maxZoom:loader.options.maxZoom,scrollwheel:loader.options.scrollwheel,mapTypeControlOptions:{mapTypeIds:o}});for(n in loader.options.mapTypes)e.mapTypes.set(loader.options.mapTypes[n].name,loader.mapTypes[loader.options.mapTypes[n].name]),loader.options.mapTypes[n].active&&e.setMapTypeId(loader.options.mapTypes[n].name);return e},loader.autoloadMarkers=function(){loader.options.markers=[],$(".map-location[data-lat][data-lng]").each(function(){var o=$(this).data("icon")||"",e=$(this).data("icon-width")||loader.options.iconWidth||"",a=$(this).data("icon-height")||loader.options.iconHeight||"";o&&e&&a&&(o={size:{width:e,height:a},scaledSize:{width:e,height:a},url:o}),loader.options.markers.push({position:{lat:$(this).data("lat"),lng:$(this).data("lng")},title:$(this).data("title"),info:{content:this,trigger:$(this).data("trigger")},icon:o})})},loader.addMarker=function(o){o.position=o.position||loader.options.center,o.title=o.title||"",o.icon=o.icon||"";var e=new google.maps.Marker({map:loader.map,position:o.position,visible:!0,title:o.title,icon:o.icon});e&&o.info&&loader.addInfoBox(e,o.info),loader.markers.push(e)},loader.addInfoBox=function(o,e){e.content=e.content||"",e.trigger=e.trigger||"click";var a=new google.maps.InfoWindow({content:e.content});google.maps.event.addListener(a,"domready",function(){loader.container$.find(".map-location").each(function(){$(this).parent().parent().toggleClass("map-location-container",!0)})}),"load"===e.trigger&&(a.open(loader.map,o),e.trigger="click"),google.maps.event.addListener(o,e.trigger,function(){a.open(loader.map,o)})},loader.exception=function(o){this.message="MapLoader: "+o,this.name="Exception"};try{loader.init()}catch(e){return void console.log(e.message)}return{options:loader.options,markers:loader.markers}};$.fn[name]=function(o){return this.length?this.each(function(){$.data(this,name)||$.data(this,name,new mapLoader(this,o))}):void console.log("Map container not found")}}(jQuery,window,document);